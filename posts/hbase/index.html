<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  
  
  
  
  <link rel="prev" href="https://hellosilicat.github.io/posts/cluster/" />
  <link rel="next" href="https://hellosilicat.github.io/posts/adaboost/" />
  <link rel="canonical" href="https://hellosilicat.github.io/posts/hbase/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Single Node HBase: Build with Aliyun ECS | Jialiang Pei
       
  </title>
  <meta name="title" content="Single Node HBase: Build with Aliyun ECS | Jialiang Pei">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/hellosilicat.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "Single Node HBase: Build with Aliyun ECS",
    "headline" : "Single Node HBase: Build with Aliyun ECS",
    "description" : "0. Tips  Single Node means that I only have one Aliyun ECS.(1vCPU\/2 GB\/CentOS7) In hosts file, use private IP. You can get it from Aliyun Console The version of JDK, Hadoop and HBase must be compatible. (Google it!) If some process are not started, read the logs and find the errors(xxx\/logs\/xxx.log) If some paths are not existed, mkdir them Configure with private IP but visit from public IP  1.",
    "inLanguage" : "en",
    "author" : "",
    "creator" : "",
    "publisher": "",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "2019",
    "datePublished": "2019-11-04 12:50:00 \x2b0800 CST",
    "dateModified" : "2019-11-04 12:50:00 \x2b0800 CST",
    "url" : "https:\/\/hellosilicat.github.io\/posts\/hbase\/",
    "wordCount" : "389",
    "keywords" : [  "Jialiang Pei"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://hellosilicat.github.io/">Jialiang Pei</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/life/" title="">Life</a>
                
                <a class="menu-item" href="/" title="">Sci &amp; Tech</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://hellosilicat.github.io/">Jialiang Pei</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/about/" title="">About</a>
                
                <a class="menu-item" href="/life/" title="">Life</a>
                
                <a class="menu-item" href="/" title="">Sci &amp; Tech</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Single Node HBase: Build with Aliyun ECS</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://hellosilicat.github.io/" rel="author"></a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-11-04 itemprop="datePublished">November 4, 2019</time>
                </span>
                in
                
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          

<h3 id="0-tips">0. Tips</h3>

<ul>
<li>Single Node means that I only have one Aliyun ECS.(1vCPU/2 GB/<strong>CentOS7</strong>)</li>
<li>In hosts file, use private IP. You can get it from Aliyun Console</li>
<li>The version of JDK, Hadoop and HBase must be compatible. (Google it!)</li>
<li>If some process are not started, read the logs and find the errors(<code>xxx/logs/xxx.log</code>)</li>
<li>If some paths are not existed, <code>mkdir</code> them</li>
<li>Configure with private IP but visit from public IP</li>
</ul>

<hr />

<h3 id="1-preparation">1. Preparation</h3>

<p>A. Change the hostname to <code>hadoop</code> with <code>vim /etc/hostname</code></p>

<p>B. Add <code>xxxx hadoop</code> to <code>/etc/hosts</code>. (Must be private IP, you can get it from Aliyun Console)</p>

<p>C. Download <a href="https://www-us.apache.org/dist/hadoop/common/hadoop-2.9.2/hadoop-2.9.2.tar.gz">Hadoop 2.9.2</a>/<a href="https://www-us.apache.org/dist/hbase/1.5.0/hbase-1.5.0-bin.tar.gz">HBase 1.5.0</a> and Decompress it to <code>/usr/local/software/</code></p>

<hr />

<h3 id="2-build-jdk">2. Build JDK</h3>

<p>A. Add following lines to <code>/etc/profile</code></p>

<pre><code>export JAVA_HOME=/usr/local/software/jdk1.8.0_231/
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$CLASSPATH
export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH
</code></pre>

<p>B. Refresh with <code>source /etc/profile</code></p>

<p>C. Check with <code>java -version</code></p>

<hr />

<h3 id="3-build-hadoop">3. Build Hadoop</h3>

<p>A. Adding following lines to <code>/etc/profile</code></p>

<pre><code>export HADOOP_HOME=/usr/local/software/hadoop-2.9.2
export PATH=$PATH:$HADOOP_HOME/bin
export PATH=$PATH:$HADOOP_HOME/sbin
</code></pre>

<p>B. Refresh it with <code>source /etc/profile</code></p>

<p>C. Check with <code>hadoop version</code></p>

<hr />

<h3 id="4-configure-hdfs">4. Configure HDFS</h3>

<p>A. Add <code>export JAVA_HOME=/usr/local/software/jdk1.8.0_231</code> to <code>/usr/local/software/hadoop-2.9.2/etc/hadoop/hadoop-env.sh</code></p>

<p>B. Configure <code>/usr/local/software/hadoop-2.9.2/etc/hadoop/core-site.xml</code></p>

<pre><code>&lt;configuration&gt;
        &lt;property&gt;
             &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
             &lt;value&gt;file:/usr/local/software/hadoopTmp&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
             &lt;name&gt;fs.defaultFS&lt;/name&gt;
             &lt;value&gt;hdfs://hadoop:9000&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<p>C. Configure <code>/usr/local/software/hadoop-2.9.2/etc/hadoop/hdfs-site.xml</code></p>

<pre><code>&lt;configuration&gt;
        &lt;property&gt;
             &lt;name&gt;dfs.replication&lt;/name&gt;
             &lt;value&gt;1&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
            &lt;name&gt;dfs.namenode.datanode.registration.ip-hostname-check&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
             &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
             &lt;value&gt;file:/usr/local/software/hadoopTmp/dfs/name&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
             &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
             &lt;value&gt;file:/usr/local/software/hadoopTmp/dfs/data&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<p>D. Format with <code>hdfs namenode -format</code> and <code>hdfs datanode -format</code></p>

<p>E. Start with <code>hadoop-daemon.sh start namenode</code> and <code>hadoop-daemon.sh start datanode</code></p>

<p>F. Check with <code>jps</code>(three process:Jps/NameNode/DataNode) and visit <code>xxx:50070</code> with Chrome.
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://m.qpic.cn/psb?/V12HCzzo2MbQyJ/hEgx0kpRRfL6MpZWu*NuGo.kUENFcLrm2r9zDzP1Mng!/b/dDUBAAAAAAAA&amp;bo=NAg4BAAAAAADByI!&amp;rf=viewer_4" alt="hadoop" class="lazyload"><figcaption class="image-caption">hadoop</figcaption></figure></p>

<hr />

<h3 id="5-configure-yarn">5. Configure YARN</h3>

<p>A. Add <code>export JAVA_HOME=/usr/local/software/jdk1.8.0_231</code> to <code>/usr/local/software/hadoop-2.9.2/etc/hadoop/yarn-env.sh</code></p>

<p>B. Configure <code>/usr/local/software/hadoop-2.9.2/etc/hadoop/yarn-site.xml</code></p>

<pre><code>&lt;configuration&gt;
&lt;!-- Site specific YARN configuration properties --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
        &lt;value&gt;hadoop&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<p>C. Start with <code>yarn-daemon.sh start resourcemanager</code> and <code>yarn-daemon.sh start nodemanager</code>.</p>

<p>D. Check with <code>jps</code>(five process:Jps/DataNode/ResourceManager/NameNode/NodeManager) and visit <code>xxx:8088</code> with Chrome.
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://m.qpic.cn/psb?/V12HCzzo2MbQyJ/*DL9.VD3CGB*ZOlsWa7ahTzhfOdDGGgYN2UmU.KZsXo!/b/dAQBAAAAAAAA&amp;bo=AAokBQAKJAUDCSw!&amp;rf=viewer_4" alt="yarn" class="lazyload"><figcaption class="image-caption">yarn</figcaption></figure></p>

<hr />

<h3 id="6-configure-mapreduce">6. Configure MapReduce</h3>

<p>A. Add <code>export JAVA_HOME=/usr/local/software/jdk1.8.0_231</code> to <code>/usr/local/software/hadoop-2.9.2/etc/hadoop/mapred-env.sh</code></p>

<p>B. Copy configuration xml with <code>cp /usr/local/software/hadoop-2.9.2/etc/hadoop/mapred-site.xml.template /usr/local/software/hadoop-2.9.2/etc/hadoop/mapred-site.xml</code></p>

<p>C. Configure <code>/usr/local/software/hadoop-2.9.2/etc/hadoop/mapred-site.xml</code></p>

<pre><code>&lt;configuration&gt;
    &lt;property&gt; 
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<hr />

<h3 id="7-build-hbase">7. Build HBase</h3>

<p>A. Add following lines to <code>/etc/profile</code></p>

<pre><code>export HBASE_HOME=/usr/local/software/hbase-1.5.0
export PATH=$PATH:$HBASE_HOME/bin
</code></pre>

<p>B. Copy <code>hdfs-site.xml</code> and <code>core-site.xml</code> from hadoop dir to hbase dir</p>

<pre><code>cp /usr/local/software/hadoop-2.9.2/etc/hadoop/core-site.xml /usr/local/software/hbase-1.5.0/conf/
cp /usr/local/software/hadoop-2.9.2/etc/hadoop/hdfs-site.xml /usr/local/software/hbase-1.5.0/conf/
</code></pre>

<p>C. Add following lines  to <code>/usr/local/software/hbase-1.5.0/conf/hbase-env.sh</code></p>

<pre><code>export JAVA_HOME=/usr/local/software/jdk1.8.0_231
export HBASE_MANAGES_ZK=true
</code></pre>

<p>D. Configure <code>/usr/local/software/hbase-1.5.0/conf/hbase-site.xml</code></p>

<pre><code>&lt;configuration&gt;
        &lt;property&gt;
                &lt;name&gt;hbase.rootdir&lt;/name&gt;
                &lt;value&gt;hdfs://hadoop:9000/hbase&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
                &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;
                &lt;value&gt;true&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
                &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;
                &lt;value&gt;/usr/local/software/hbaseTmp/data&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
                &lt;name&gt;hbase.unsafe.stream.capability.enforce&lt;/name&gt;
                &lt;value&gt;false&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<p>E. Change <code>/usr/local/software/hbase-1.5.0/conf/regionservers</code>: <code>localhost</code> to <code>hadoop</code></p>

<p>F. Start with <code>start-hbase.sh</code></p>

<p>G. Check with <code>jps</code> and <code>hbase shell</code>
<figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://m.qpic.cn/psb?/V12HCzzo2MbQyJ/mN9zWP5n6UxzM4YJtvSlB0N**n3zCNoBzWXCUzfC7Rs!/b/dLYAAAAAAAAA&amp;bo=yAeAAhkImgIDCeg!&amp;rf=viewer_4" alt="hbase" class="lazyload"><figcaption class="image-caption">hbase</figcaption></figure></p>

<hr />

<h3 id="reference">Reference</h3>

<ol>
<li><a href="https://www.cnblogs.com/jhxxb/p/10562460.html">CentOS7 下 Hadoop 单节点(伪分布式)部署</a></li>
<li><a href="https://blog.csdn.net/l1028386804/article/details/78309501">HBase之——单节点安装</a></li>
</ol>

    </div>

    <div class="post-copyright">
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://hellosilicat.github.io/posts/hbase/>https://hellosilicat.github.io/posts/hbase/</span>
            </p>
            
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://hellosilicat.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://hellosilicat.github.io/posts/cluster/" class="prev" rel="prev" title="K-Means and DBSCAN"><i class="iconfont icon-left"></i>&nbsp;K-Means and DBSCAN</a>
         
        
        <a href="https://hellosilicat.github.io/posts/adaboost/" class="next" rel="next" title="Additive Model and Adaboost">Additive Model and Adaboost&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
